CUDA_VISIBLE_DEVICES=0,1 python3 -m torch.distributed.launch --nproc_per_node 2 --master_port $(( $RANDOM % 99000 + 1000  )) /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/run_qa.py --do_train --evaluate_during_training  --model_type bert --train_file /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/../data/download/qa/triviaqa/train.jsonl --predict_file /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/../data/download/qa/triviaqa/dev.jsonl --doc_stride 128 --per_gpu_train_batch_size 8 --gradient_accumulation_steps 2 --per_gpu_eval_batch_size 64 --learning_rate 3e-5 --weight_decay 0.01 --num_train_epochs 2 --max_seq_length 512 --save_steps 4377 --output_dir /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/results/large/triviaqa --config_file /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/bert_large.json --vocab_file /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/vocab/vocab --init_checkpoint /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/results/large_dp=0.1_attdp=0.1_lr=1e-3_step=30000/checkpoints/ckpt_33000.pt --do_lower_case --overwrite_output_dir 2>&1 | tee /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/results/large/triviaqa/results.txt

CUDA_VISIBLE_DEVICES=1 python3 -m torch.distributed.launch --nproc_per_node 1 --master_port $(( $RANDOM % 99000 + 1000  )) /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/run_qa.py --do_eval --evaluate_during_training  --model_type bert --train_file /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/../data/download/qa/triviaqa/train.jsonl --predict_file /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/../data/download/qa/triviaqa/test.jsonl --doc_stride 128 --per_gpu_train_batch_size 8 --per_gpu_eval_batch_size 32 --learning_rate 3e-5 --weight_decay 0.01 --num_train_epochs 2 --max_seq_length 512 --save_steps 4377 --output_dir /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/results/large/triviaqa --config_file /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/bert_large.json --vocab_file /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/vocab/vocab --init_checkpoint /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/results/large_dp=0.1_attdp=0.1_lr=1e-3_step=30000/checkpoints/ckpt_33000.pt --do_lower_case --overwrite_output_dir 2>&1 | tee /apdcephfs/share_47076/weizechen/hilbert/residual-timecorrect/results/large/triviaqa/test_result.txt
